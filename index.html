<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Portfolio profesional Ifqy Gifha Azhar - Mobile Developer with 2+ years of experience in building high-quality mobile applications."
        />
        <meta
            name="keywords"
            content="flutter developer, kotlin developer, android developer, backend developer, full stack developer, web developer, ifqy gifha azhar, ifqy, gifha, azhar"
        />
        <meta name="author" content="Ifqy Gifha Azhar" />
        <meta name="robots" content="index, follow" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://ifqy.dev/" />
        <meta
            property="og:title"
            content="Ifqy Gifha Azhar - Mobile Developer Portfolio"
        />
        <meta
            property="og:description"
            content="Portfolio profesional Ifqy Gifha Azhar - Mobile Developer with 2+ years of experience in building high-quality mobile applications."
        />
        <meta
            property="og:image"
            content="https://ifqy.dev/assets/profile.jpeg"
        />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://ifqy.dev/" />
        <meta
            property="twitter:title"
            content="Ifqy Gifha Azhar - Mobile Developer Portfolio"
        />
        <meta
            property="twitter:description"
            content="Portfolio profesional Ifqy Gifha Azhar - Mobile Developer with 2+ years of experience in building high-quality mobile applications."
        />
        <meta
            property="twitter:image"
            content="https://ifqy.dev/assets/profile.jpeg"
        />

        <!-- Structured Data (JSON-LD) -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Person",
                "name": "Ifqy Gifha Azhar",
                "jobTitle": "Mobile Developer",
                "description": "Mobile Developer with 2+ years of experience in building high-quality mobile applications.",
                "url": "https://ifqy.dev/",
                "image": "https://ifqy.dev/assets/profile.jpeg",
                "email": "ifqygazhar@gmail.com",
                "telephone": "+6285156298681",
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "Bandung",
                    "addressCountry": "Indonesia"
                },
                "sameAs": [
                    "https://linkedin.com/in/ifqygazhar",
                    "https://github.com/ifqygazhar"
                ]
            }
        </script>

        <title>Ifqy Gifha Azhar - Mobile Developer Portfolio</title>

        <!-- Tailwind CSS -->
        <script src="js/tailwindcss.js"></script>
        <script>
            tailwind.config = {
                darkMode: "class",
            };
        </script>

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Data File -->
        <script src="js/data.js"></script>

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/style2.css" />

        <style>
            /* Language selector styles */
            .language-selector {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 0.5rem;
                padding: 0.25rem;
            }

            .language-btn {
                padding: 0.25rem 0.75rem;
                border-radius: 0.375rem;
                font-size: 0.875rem;
                font-weight: 500;
                transition: all 0.3s ease;
                cursor: pointer;
                border: none;
                background: transparent;
                color: inherit;
            }

            .language-btn:hover {
                background: rgba(255, 255, 255, 0.2);
            }

            .language-btn.active {
                background: rgba(99, 102, 241, 0.8);
                color: white;
            }

            .dark .language-btn.active {
                background: rgba(129, 140, 248, 0.8);
            }
        </style>
    </head>
    <body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100">
        <!-- Print Button -->
        <button onclick="printCV()" class="print-btn no-print">
            <i class="fas fa-print"></i>
            <span data-text="printCV">Cetak CV</span>
        </button>

        <!-- Header -->
        <header
            class="bg-white dark:bg-gray-800 shadow-md dark:shadow-gray-900/50 sticky top-0 z-50 no-print"
        >
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <h1
                        class="text-2xl font-bold text-indigo-600 dark:text-indigo-400"
                        id="headerName"
                    >
                        Ifqy Gifha Azhar
                    </h1>

                    <!-- Controls Container -->
                    <div class="flex items-center space-x-4">
                        <!-- Language Selector -->
                        <div class="language-selector">
                            <button
                                class="language-btn active"
                                data-lang="id"
                                onclick="setLanguage('id')"
                            >
                                ID
                            </button>
                            <button
                                class="language-btn"
                                data-lang="en"
                                onclick="setLanguage('en')"
                            >
                                EN
                            </button>
                        </div>

                        <!-- Theme Toggle -->
                        <div class="flex items-center space-x-3">
                            <span
                                class="theme-icon text-sm text-yellow-500"
                                id="sunIcon"
                                onclick="setThemeMode('light')"
                            >
                                <i class="fas fa-sun"></i>
                            </span>
                            <div
                                class="toggle-switch auto"
                                id="themeSwitch"
                                onclick="cycleTheme()"
                            >
                                <input
                                    type="checkbox"
                                    id="themeToggle"
                                    style="pointer-events: none"
                                />
                                <span class="slider"></span>
                                <div
                                    class="theme-indicator"
                                    id="themeIndicator"
                                >
                                    Auto
                                </div>
                            </div>
                            <span
                                class="theme-icon text-sm text-blue-400"
                                id="moonIcon"
                                onclick="setThemeMode('dark')"
                            >
                                <i class="fas fa-moon"></i>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu -->
                <nav id="mobileMenu" class="hidden md:hidden mt-4 space-y-2">
                    <a
                        href="#cv"
                        class="block py-2 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition"
                        data-text="cv"
                        >CV</a
                    >
                    <a
                        href="#projects"
                        class="block py-2 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition"
                        data-text="projects"
                        >Proyek</a
                    >
                    <a
                        href="#contact"
                        class="block py-2 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition"
                        data-text="contact"
                        >Kontak</a
                    >
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <!-- Tab Navigation -->
            <div class="flex justify-center mb-8 no-print tab-navigation">
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-1 inline-flex"
                >
                    <button
                        onclick="showTab('cv')"
                        id="cvTab"
                        class="tab-btn px-6 py-2 rounded-md font-medium transition-all duration-300 bg-indigo-600 text-white"
                    >
                        <i class="fas fa-file-alt mr-2"></i
                        ><span data-text="cv">CV</span>
                    </button>
                    <button
                        onclick="showTab('projects')"
                        id="projectsTab"
                        class="tab-btn px-6 py-2 rounded-md font-medium transition-all duration-300 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"
                    >
                        <i class="fas fa-folder-open mr-2"></i
                        ><span data-text="projects">Proyek</span>
                    </button>
                </div>
            </div>

            <!-- CV Content -->
            <section id="cv" class="tab-content">
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 max-w-4xl mx-auto"
                >
                    <!-- Personal Information -->
                    <div class="mb-8 cv-header" id="personalInfoSection">
                        <!-- Dynamic content will be loaded here -->
                    </div>

                    <!-- Skills -->
                    <div class="mb-8">
                        <h3
                            class="text-2xl font-bold mb-4 border-b-2 border-indigo-600 dark:border-indigo-400 pb-2 section-header"
                            data-text="skills"
                        >
                            Keahlian
                        </h3>
                        <div
                            class="grid grid-cols-1 md:grid-cols-2 gap-6 skills-grid"
                            id="skillsSection"
                        >
                            <!-- Dynamic content will be loaded here -->
                        </div>
                    </div>

                    <!-- Work Experience -->
                    <div class="mb-8">
                        <h3
                            class="text-2xl font-bold mb-4 border-b-2 border-indigo-600 dark:border-indigo-400 pb-2 section-header"
                            data-text="workExperience"
                        >
                            Pengalaman Kerja
                        </h3>
                        <div class="space-y-6" id="experienceSection">
                            <!-- Dynamic content will be loaded here -->
                        </div>
                    </div>

                    <!-- Education -->
                    <div class="mb-8">
                        <h3
                            class="text-2xl font-bold mb-4 border-b-2 border-indigo-600 dark:border-indigo-400 pb-2 section-header"
                            data-text="education"
                        >
                            Pendidikan
                        </h3>
                        <div id="educationSection">
                            <!-- Dynamic content will be loaded here -->
                        </div>
                    </div>

                    <!-- Certifications -->
                    <div>
                        <h3
                            class="text-2xl font-bold mb-4 border-b-2 border-indigo-600 dark:border-indigo-400 pb-2 section-header"
                            data-text="certifications"
                        >
                            Sertifikasi
                        </h3>
                        <div
                            class="grid grid-cols-1 md:grid-cols-2 gap-4"
                            id="certificationsSection"
                        >
                            <!-- Dynamic content will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Projects Content -->
            <section id="projects" class="tab-content hidden">
                <div class="max-w-6xl mx-auto">
                    <h2
                        class="text-3xl font-bold text-center mb-8"
                        data-text="myProjects"
                    >
                        Proyek Saya
                    </h2>
                    <div
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                        id="projectsSection"
                    >
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer
            id="contact"
            class="bg-gray-800 dark:bg-gray-900 text-white py-8 mt-16"
        >
            <div class="container mx-auto px-4">
                <div class="text-center">
                    <h3 class="text-2xl font-bold mb-4" data-text="letsConnect">
                        Mari Terhubung
                    </h3>
                    <p class="mb-6" data-text="footerDescription">
                        Tertarik untuk bekerja sama? Jangan ragu untuk
                        menghubungi!
                    </p>
                    <div
                        class="flex justify-center space-x-4 mb-6"
                        id="footerContacts"
                    >
                        <!-- Dynamic content will be loaded here -->
                    </div>
                    <p class="text-gray-400 text-sm">
                        © <span id="footerYear"></span>
                        <span id="footerName">Ifqy Gifha Azhar</span>.
                        <span data-text="allRightsReserved"
                            >Semua hak dilindungi.</span
                        >
                    </p>
                </div>
            </div>
        </footer>

        <!-- JavaScript -->
        <script>
            let lastScrollTop = 0;
            let scrollTimeout;
            const header = document.querySelector("header");
            const body = document.body;
            const isMobile = () => window.innerWidth <= 768;

            function handleScroll() {
                if (!isMobile()) {
                    // Reset header position for desktop
                    header.classList.remove("header-hidden");
                    body.classList.remove("header-padding");
                    return;
                }

                const scrollTop =
                    window.pageYOffset || document.documentElement.scrollTop;
                const scrollDifference = scrollTop - lastScrollTop;

                // Clear existing timeout
                if (scrollTimeout) {
                    clearTimeout(scrollTimeout);
                }

                // Hide header when scrolling down, show when scrolling up
                if (scrollDifference > 5 && scrollTop > 100) {
                    // Scrolling down - hide header
                    header.classList.add("header-hidden");
                    body.classList.add("header-padding");
                } else if (scrollDifference < -5 || scrollTop <= 100) {
                    // Scrolling up or near top - show header
                    header.classList.remove("header-hidden");
                    body.classList.remove("header-padding");
                }

                // Auto-show header after user stops scrolling
                scrollTimeout = setTimeout(() => {
                    if (isMobile() && scrollTop > 100) {
                        header.classList.remove("header-hidden");
                    }
                }, 2000); // Show header 2 seconds after scrolling stops

                lastScrollTop = scrollTop;
            }

            // Touch/hover zone to show header on mobile
            function createHeaderShowZone() {
                if (!isMobile()) return;

                const showZone = document.createElement("div");
                showZone.className = "header-show-zone";

                // Show header when touching near top of screen
                showZone.addEventListener("touchstart", () => {
                    header.classList.remove("header-hidden");
                    body.classList.remove("header-padding");
                });

                document.body.appendChild(showZone);
            }

            // Handle window resize
            function handleResize() {
                if (!isMobile()) {
                    header.classList.remove("header-hidden");
                    body.classList.remove("header-padding");

                    // Remove show zone if it exists
                    const showZone =
                        document.querySelector(".header-show-zone");
                    if (showZone) {
                        showZone.remove();
                    }
                } else {
                    createHeaderShowZone();
                }
            }

            // Initialize auto-hide functionality
            function initializeAutoHide() {
                // Add scroll listener with throttling
                let ticking = false;

                window.addEventListener("scroll", () => {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            handleScroll();
                            ticking = false;
                        });
                        ticking = true;
                    }
                });

                // Add resize listener
                window.addEventListener("resize", handleResize);

                // Initial setup
                handleResize();
            }
            document.getElementById("footerYear").textContent =
                new Date().getFullYear();

            // Update text content based on current language
            function updateTextContent() {
                const texts = getCurrentUITexts();
                document.querySelectorAll("[data-text]").forEach((element) => {
                    const key = element.getAttribute("data-text");
                    if (texts[key]) {
                        element.textContent = texts[key];
                    }
                });
            }

            // Render functions with multilanguage support
            function renderPersonalInfo() {
                const section = document.getElementById("personalInfoSection");
                const personalData = getCurrentPersonalInfo();
                const contactsHTML = personalData.contacts
                    .map(
                        (contact) =>
                            `<a href="${contact.href}" ${contact.type === "linkedin" || contact.type === "github" ? 'target="_blank"' : ""}
                     class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 transition">
                        <i class="${contact.icon} mr-1"></i>${contact.value}
                    </a>`,
                    )
                    .join("");

                section.innerHTML = `
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-6">
                        <div class="relative profile-image">
                            <img src="${personalData.profileImage}" alt="Profile Photo"
                                 class="w-32 h-32 rounded-full object-cover border-4 border-indigo-500 dark:border-indigo-400" />
                            <div class="absolute bottom-0 right-0 w-8 h-8 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                        </div>
                        <div class="text-center md:text-left flex-1">
                            <h2 class="text-3xl font-bold mb-2">${personalData.name}</h2>
                            <h3 class="text-xl text-indigo-600 dark:text-indigo-400 mb-3">${personalData.title}</h3>
                            <p class="text-gray-600 dark:text-gray-300 mb-4">${personalData.description}</p>
                            <div class="flex flex-wrap gap-3 justify-center md:justify-start contact-info">
                                ${contactsHTML}
                            </div>
                        </div>
                    </div>
                `;

                // Update header and footer
                document.getElementById("headerName").textContent =
                    personalData.name;
                document.getElementById("footerName").textContent =
                    personalData.name;
            }

            function renderSkills() {
                const section = document.getElementById("skillsSection");
                const skillsData = getCurrentSkills();
                const skillsHTML = skillsData
                    .map((skillCategory) => {
                        const badgesHTML = skillCategory.items
                            .map(
                                (skill) =>
                                    `<span class="skill-badge px-3 py-1 bg-${skillCategory.color}-100 dark:bg-${skillCategory.color}-900/50 text-${skillCategory.color}-800 dark:text-${skillCategory.color}-300 rounded-full text-sm">
                            ${skill}
                        </span>`,
                            )
                            .join("");

                        const textVersion = skillCategory.items.join(", ");

                        return `
                        <div class="skill-category">
                            <h4 class="font-semibold mb-3 text-lg">${skillCategory.category}</h4>
                            <div class="flex flex-wrap gap-2 skills-list">
                                ${badgesHTML}
                            </div>
                            <div class="skills-text" style="display: none">${textVersion}</div>
                        </div>
                    `;
                    })
                    .join("");

                section.innerHTML = skillsHTML;
            }

            function renderWorkExperience() {
                const section = document.getElementById("experienceSection");
                const experienceData = getCurrentWorkExperience();
                const texts = getCurrentUITexts();

                const experienceHTML = experienceData
                    .map((job) => {
                        const responsibilitiesHTML = job.responsibilities
                            .map((resp) => `<li>${resp}</li>`)
                            .join("");

                        return `
                        <div class="border-l-4 border-indigo-600 dark:border-indigo-400 pl-4 experience-item">
                            <h4 class="font-bold text-lg">${job.position}</h4>
                            <p class="text-indigo-600 dark:text-indigo-400 font-medium experience-company">
                                ${job.company} • ${job.location}
                            </p>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-2 experience-date">${job.period}</p>
                            <ul class="list-disc list-inside text-gray-700 dark:text-gray-300 space-y-1 experience-list">
                                ${responsibilitiesHTML}
                            </ul>
                        </div>
                    `;
                    })
                    .join("");

                section.innerHTML = experienceHTML;
            }

            function renderEducation() {
                const section = document.getElementById("educationSection");
                const educationData = getCurrentEducation();
                const texts = getCurrentUITexts();

                const educationHTML = educationData
                    .map(
                        (edu) => `
                    <div class="border-l-4 border-indigo-600 dark:border-indigo-400 pl-4 education-item">
                        <h4 class="font-bold text-lg">${edu.degree}</h4>
                        <p class="text-indigo-600 dark:text-indigo-400 font-medium">
                            ${edu.institution} • ${edu.location}
                        </p>
                        <p class="text-gray-600 dark:text-gray-400 text-sm">${edu.period}</p>
                        ${edu.gpa ? `<p class="text-gray-700 dark:text-gray-300 mt-2">${texts.gpa}: ${edu.gpa}</p>` : ""}
                    </div>
                `,
                    )
                    .join("");

                section.innerHTML = educationHTML;
            }

            function renderCertifications() {
                const section = document.getElementById(
                    "certificationsSection",
                );
                const texts = getCurrentUITexts();

                const certificationsHTML = certifications
                    .map(
                        (cert) => `
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg cert-item">
                        <h4 class="font-semibold">${cert.name}</h4>
                        <p class="text-gray-600 dark:text-gray-400 text-sm">
                            ${cert.issuer} • ${cert.year}
                            ${cert.certificateUrl ? `• <a class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" href="${cert.certificateUrl}">${texts.certificate}</a>` : ""}
                        </p>
                    </div>
                `,
                    )
                    .join("");

                section.innerHTML = certificationsHTML;
            }

            function renderProjects() {
                const section = document.getElementById("projectsSection");
                const projectsData = getCurrentProjects();
                const texts = getCurrentUITexts();

                const projectsHTML = projectsData
                    .map((project) => {
                        const techBadgesHTML = project.technologies
                            .map(
                                (tech) =>
                                    `<span class="px-2 py-1 bg-${project.color}-100 dark:bg-${project.color}-900/50 text-${project.color}-800 dark:text-${project.color}-300 rounded text-xs">
                            ${tech}
                        </span>`,
                            )
                            .join("");

                        return `
                        <div class="project-card bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                            <img src="${project.image}" alt="${project.title}" class="w-full h-48 object-cover" />
                            <div class="p-6">
                                <h3 class="text-xl font-bold mb-2">${project.title}</h3>
                                <p class="text-gray-600 dark:text-gray-300 mb-4">${project.description}</p>
                                <div class="flex flex-wrap gap-2 mb-4">
                                    ${techBadgesHTML}
                                </div>
                                <button onclick="openProject('${project.id}')"
                                        class="w-full gradient-bg text-white py-2 px-4 rounded-lg hover:opacity-90 transition">
                                    <i class="fas fa-external-link-alt mr-2"></i>${texts.open}
                                </button>
                            </div>
                        </div>
                    `;
                    })
                    .join("");

                section.innerHTML = projectsHTML;
            }

            function renderFooterContacts() {
                const section = document.getElementById("footerContacts");
                const personalData = getCurrentPersonalInfo();
                const contactsHTML = personalData.contacts
                    .map((contact) => {
                        let bgColor = "bg-indigo-600 hover:bg-indigo-700";
                        if (contact.type === "whatsapp")
                            bgColor = "bg-green-600 hover:bg-green-700";

                        return `
                        <a href="${contact.href}" ${contact.type === "linkedin" || contact.type === "github" ? 'target="_blank"' : ""}
                           class="${bgColor} p-3 rounded-full transition">
                            <i class="${contact.icon}"></i>
                        </a>
                    `;
                    })
                    .join("");

                // Add WhatsApp if not in contacts
                const hasWhatsApp = personalData.contacts.some(
                    (c) => c.type === "whatsapp",
                );
                if (!hasWhatsApp) {
                    const phoneContact = personalData.contacts.find(
                        (c) => c.type === "phone",
                    );
                    if (phoneContact) {
                        const whatsappHTML = `
                            <a href="https://wa.me/${phoneContact.value.replace(/\D/g, "")}" target="_blank"
                               class="bg-green-600 hover:bg-green-700 p-3 rounded-full transition">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        `;
                        section.innerHTML = contactsHTML + whatsappHTML;
                        return;
                    }
                }

                section.innerHTML = contactsHTML;
            }

            // Initialize all sections when page loads
            function initializePage() {
                renderPersonalInfo();
                renderSkills();
                renderWorkExperience();
                renderEducation();
                renderCertifications();
                renderProjects();
                renderFooterContacts();
                updateTextContent();
            }

            // Print CV function
            function printCV() {
                showTab("cv");
                const existingNotifications =
                    document.querySelectorAll(".notification");
                existingNotifications.forEach((notif) => notif.remove());

                setTimeout(() => {
                    const skillsLists =
                        document.querySelectorAll(".skills-list");
                    const skillsTexts =
                        document.querySelectorAll(".skills-text");

                    skillsLists.forEach(
                        (list) => (list.style.display = "none"),
                    );
                    skillsTexts.forEach(
                        (text) => (text.style.display = "block"),
                    );

                    const originalTitle = document.title;
                    document.title = "‎ ";

                    window.print();

                    setTimeout(() => {
                        skillsLists.forEach(
                            (list) => (list.style.display = ""),
                        );
                        skillsTexts.forEach(
                            (text) => (text.style.display = "none"),
                        );
                        document.title = originalTitle;
                    }, 1000);
                }, 100);
            }

            // Open project function
            function openProject(projectId) {
                const projectsData = getCurrentProjects();
                const texts = getCurrentUITexts();
                const project = projectsData.find((p) => p.id === projectId);
                if (project) {
                    showNotification(texts.openingProject);
                    setTimeout(() => {
                        window.open(project.githubUrl, "_blank");
                    }, 500);
                }
            }

            // Theme management with system preference support
            let currentThemeMode = "auto";
            const html = document.documentElement;
            const themeSwitch = document.getElementById("themeSwitch");
            const themeIndicator = document.getElementById("themeIndicator");
            const sunIcon = document.getElementById("sunIcon");
            const moonIcon = document.getElementById("moonIcon");

            function getSystemTheme() {
                return window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "dark"
                    : "light";
            }

            function applyTheme() {
                let actualTheme;
                if (currentThemeMode === "auto") {
                    actualTheme = getSystemTheme();
                } else {
                    actualTheme = currentThemeMode;
                }

                if (actualTheme === "dark") {
                    html.classList.add("dark");
                } else {
                    html.classList.remove("dark");
                }
                updateThemeUI();
            }

            function updateThemeUI() {
                themeSwitch.className = `toggle-switch ${currentThemeMode}`;
                const indicators = {
                    auto: "Auto",
                    light: "Light",
                    dark: "Dark",
                };
                themeIndicator.textContent = indicators[currentThemeMode];
                sunIcon.classList.toggle(
                    "active",
                    currentThemeMode === "light",
                );
                moonIcon.classList.toggle(
                    "active",
                    currentThemeMode === "dark",
                );
            }

            function setThemeMode(mode) {
                currentThemeMode = mode;
                localStorage.setItem("themeMode", mode);
                applyTheme();
            }

            function cycleTheme() {
                const modes = ["auto", "light", "dark"];
                const currentIndex = modes.indexOf(currentThemeMode);
                const nextIndex = (currentIndex + 1) % modes.length;
                setThemeMode(modes[nextIndex]);
            }

            function initializeTheme() {
                const savedThemeMode =
                    localStorage.getItem("themeMode") || "auto";
                currentThemeMode = savedThemeMode;
                applyTheme();
            }

            window
                .matchMedia("(prefers-color-scheme: dark)")
                .addEventListener("change", () => {
                    if (currentThemeMode === "auto") {
                        applyTheme();
                    }
                });

            // Tab functionality
            function showTab(tabName) {
                document.getElementById("cv").classList.add("hidden");
                document.getElementById("projects").classList.add("hidden");

                document.querySelectorAll(".tab-btn").forEach((btn) => {
                    btn.classList.remove("bg-indigo-600", "text-white");
                    btn.classList.add("text-gray-600", "dark:text-gray-300");
                });

                document.getElementById(tabName).classList.remove("hidden");

                const activeTab = document.getElementById(tabName + "Tab");
                activeTab.classList.remove(
                    "text-gray-600",
                    "dark:text-gray-300",
                );
                activeTab.classList.add("bg-indigo-600", "text-white");

                history.pushState(null, null, "#" + tabName);
            }

            function toggleMobileMenu() {
                const mobileMenu = document.getElementById("mobileMenu");
                mobileMenu.classList.toggle("hidden");
            }

            function showNotification(message) {
                const existingNotifications =
                    document.querySelectorAll(".notification");
                existingNotifications.forEach((notif) => notif.remove());

                const notification = document.createElement("div");
                notification.className = "notification";
                notification.textContent = message;

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.classList.add("show");
                }, 100);

                setTimeout(() => {
                    notification.classList.remove("show");
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 2000);
            }

            // Initialize everything when page loads
            window.addEventListener("load", () => {
                initializeLanguage();
                initializePage();
                initializeTheme();
                initializeAutoHide(); // Add this line

                const hash = window.location.hash.substring(1);
                if (hash === "projects") {
                    showTab("projects");
                } else {
                    showTab("cv");
                }
            });

            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
                anchor.addEventListener("click", function (e) {
                    e.preventDefault();
                    const target = document.querySelector(
                        this.getAttribute("href"),
                    );
                    if (target) {
                        target.scrollIntoView({
                            behavior: "smooth",
                            block: "start",
                        });
                    }
                });
            });

            // Add scroll effect to header
            window.addEventListener("scroll", () => {
                const header = document.querySelector("header");
                if (window.scrollY > 50) {
                    header.classList.add("shadow-lg");
                } else {
                    header.classList.remove("shadow-lg");
                }
            });

            // Lazy loading for images
            if ("IntersectionObserver" in window) {
                const imageObserver = new IntersectionObserver(
                    (entries, observer) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.classList.add("loaded");
                                observer.unobserve(img);
                            }
                        });
                    },
                );

                document.querySelectorAll("img").forEach((img) => {
                    imageObserver.observe(img);
                });
            }
        </script>
    </body>
</html>
